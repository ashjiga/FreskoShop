<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="~{layout/plantilla :: head}">
        <title>Factura</title>
        <style>
            @media print {
                .no-print {
                    display: none !important;
                }
                .card {
                    box-shadow: none !important;
                    border: 0 !important;
                }
                body {
                    background: #fff !important;
                }
            }
        </style>
    </head>
    <body>
        <header th:replace="~{layout/plantilla :: header}" class="no-print"></header>

        <div class="container my-4">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h3 th:text="${tienda}">FreskoShop</h3>
                            <div th:text="#{usuario.cliente} + ': ' + ${cliente}">Cliente: -</div>
                        </div>
                        <div class="text-end">
                            <div th:text="#{factura.fecha} + ': ' + ${#temporals.format(fecha, 'dd/MM/yyyy HH:mm')}">Fecha</div>
                            <div>[[#{plantilla.factura}]]</div>
                        </div>
                    </div>

                    <hr/>

                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>[[#{producto.titulo}]]</th>
                                    <th class="text-center">[[#{carrito.cantidad}]]</th>
                                    <th class="text-end">[[#{producto.precio}]]</th>
                                    <th class="text-end">[[#{carrito.total}]]</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="it : ${items}">
                                    <td th:text="${it.descripcion}">[[#{producto.titulo}]]</td>
                                    <td class="text-center" th:text="${it.cantidad}">1</td>
                                    <td class="text-end" th:text="'₡' + ${#numbers.formatDecimal(it.precio,0,'POINT',2,'COMMA')}">₡0,00</td>
                                    <td class="text-end" th:text="'₡' + ${#numbers.formatDecimal(it.total,0,'POINT',2,'COMMA')}">₡0,00</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th colspan="3" class="text-end">[[#{facturacion.subtotal}]]</th>
                                    <th class="text-end" th:text="'₡' + ${#numbers.formatDecimal(subtotal,0,'POINT',2,'COMMA')}">₡0,00</th>
                                </tr>
                                <tr>
                                    <th colspan="3" class="text-end">[[#{facturacion.impuestos}]] (13%)</th>
                                    <th class="text-end" th:text="'₡' + ${#numbers.formatDecimal(impuestos,0,'POINT',2,'COMMA')}">₡0,00</th>
                                </tr>
                                <tr>
                                    <th colspan="3" class="text-end">[[#{facturacion.total}]]</th>
                                    <th class="text-end text-success" th:text="'₡' + ${#numbers.formatDecimal(total,0,'POINT',2,'COMMA')}">₡0,00</th>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <p class="mt-4 text-center">[[#{mensaje.gracias}]]</p>

                    <div class="d-flex justify-content-center gap-2 no-print">
                        <button class="btn btn-success" onclick="window.print()">[[#{guardar.pdf}]]</button>
                        <a th:href="@{/}" class="btn btn-outline-secondary">[[#{accion.volver.inicio}]]</a>
                    </div>
                </div>
            </div>
        </div>

        <footer th:replace="~{layout/plantilla :: footer}" class="no-print"></footer>
    </body>
</html>
